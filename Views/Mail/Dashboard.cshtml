@model List<Dictionary<string, string>
    >

    @{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
    }

    @if (TempData["Message"] != null)
    {
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Create a notification element directly with the same styling
                const notificationContainer = document.getElementById('notificationContainer');
                if (notificationContainer) {
                    const notification = document.createElement('div');
                    notification.className = 'notification success';
                    notification.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-check-circle"></i>
                            <span>@TempData["Message"]</span>
                        </div>
                    `;
                    
                    notificationContainer.appendChild(notification);
                    
                    // Auto remove after 2.5 seconds (same as other notifications)
                    setTimeout(() => {
                        notification.style.animation = 'slideIn 0.2s ease-out reverse';
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.parentNode.removeChild(notification);
                            }
                        }, 200);
                    }, 2500);
                }
            });
        </script>
    }

    <style>
        .settings-btn { padding: 6px 6px; font-size: 12px; display: inline-flex; align-items: center; gap: 6px; text-decoration: none; }
        .settings-btn:hover, .settings-btn:focus { text-decoration: none; }
        .settings-btn i { font-size: 22px; }
        .header-actions { margin-left: 12px; }
        
        /* Message editor placeholder styling */
        .message-editor.placeholder-active:empty::before {
            content: attr(placeholder);
            color: #8fb7d6;
            font-style: italic;
            pointer-events: none;
        }
        
        .message-editor.placeholder-active:not(:empty):before {
            display: none;
        }
    </style>

    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <i class="fas fa-satellite-dish logo-icon"></i>
                <h1 class="logo-text">BULK EMAIL SERVICE</h1>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-value" id="totalSent">8</span>
                    <span class="stat-label">Total Emails</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="successfulSent">7</span>
                    <span class="stat-label">Successful</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="failedSent">1</span>
                    <span class="stat-label">Failed</span>
                </div>
                <div class="stat-item" id="selectedCountContainer" style="display: none;">
                    <span class="stat-value" id="selectedCount">0</span>
                    <span class="stat-label">Selected</span>
                </div>
            </div>
            <div class="header-actions">
                <a asp-controller="Settings" asp-action="Index" class="btn primary-btn settings-btn" title="Update SMTP Settings">
                    <i class="fas fa-cog"></i>
                    <div class="btn-glow"></div>
                </a>
            </div>
        </div>
    </header>

    <div class="content-grid">
        <!-- Email Compose Section -->
        <div class="compose-section col-md-4">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-rocket"></i>
                    Compose Email
                </h2>
            </div>

            <div class="compose-container">
                <div class="compose-form">
                    <!-- <div class="input-group">
                        <label class="input-label">
                            <i class="fas fa-user"></i>
                            Recipient
                        </label>
                        <input type="email" placeholder="Enter email address..." class="quantum-input" id="recipientEmail" />
                        <div class="input-glow"></div>
                    </div> -->

                    <div class="input-group">
                        <label class="input-label">
                            <i class="fas fa-tag"></i>
                            Subject
                        </label>
                        <input type="text" placeholder="Enter subject line..." class="quantum-input" id="emailSubject" />
                        <div class="input-glow"></div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            <i class="fas fa-edit"></i>
                            Message
                        </label>
                        <div class="editor-container">
                            <div class="editor-toolbar">
                                <div class="toolbar-group">
                                    <button type="button" class="toolbar-btn" data-command="bold" title="Bold">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="italic" title="Italic">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="underline" title="Underline">
                                        <i class="fas fa-underline"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="strikeThrough" title="Strikethrough">
                                        <i class="fas fa-strikethrough"></i>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <div class="dropdown">
                                        <button type="button" class="toolbar-btn dropdown-toggle" id="fontFamilyDropdown">
                                            <i class="fas fa-font"></i>
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                        <div class="dropdown-menu" id="fontFamilyMenu">
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Arial">Arial</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Georgia">Georgia</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Times New Roman">Times New Roman</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Helvetica">Helvetica</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Verdana">Verdana</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Courier New">Courier New</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Impact">Impact</button>
                                            <button type="button" class="dropdown-item" data-command="fontName" data-value="Comic Sans MS">Comic Sans MS</button>
                                        </div>
                                    </div>
                                    <div class="dropdown">
                                        <button type="button" class="toolbar-btn dropdown-toggle" id="fontSizeDropdown">
                                            <i class="fas fa-text-height"></i>
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                        <div class="dropdown-menu" id="fontSizeMenu">
                                            <button type="button" class="dropdown-item" data-command="fontSize" data-value="1">Small</button>
                                            <button type="button" class="dropdown-item" data-command="fontSize" data-value="3">Normal</button>
                                            <button type="button" class="dropdown-item" data-command="fontSize" data-value="5">Large</button>
                                            <button type="button" class="dropdown-item" data-command="fontSize" data-value="7">Extra Large</button>
                                        </div>
                                    </div>
                                    <div class="dropdown">
                                        <button type="button" class="toolbar-btn dropdown-toggle" id="textColorDropdown">
                                            <i class="fas fa-palette"></i>
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                        <div class="dropdown-menu color-menu" id="textColorMenu">
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#000000" style="background: #000000;"></button>
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#ffffff" style="background: #ffffff;"></button>
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#00ff00" style="background: #00ff00;"></button>
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#0000ff" style="background: #0000ff;"></button>
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#ffff00" style="background: #ffff00;"></button>
                                            <button type="button" class="color-item" data-command="foreColor" data-value="#ff00ff" style="background: #ff00ff;"></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="toolbar-group">
                                    <button type="button" class="toolbar-btn" data-command="justifyLeft" title="Align Left">
                                        <i class="fas fa-align-left"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="justifyCenter" title="Align Center">
                                        <i class="fas fa-align-center"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="justifyRight" title="Align Right">
                                        <i class="fas fa-align-right"></i>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                                        <i class="fas fa-list-ol"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="message-editor" id="messageBody" contenteditable="true" placeholder="Type your message here..." style="min-height: 300px;"></div>

                            <!-- Attachments Section -->
                            <div class="attachments-section" id="attachmentsSection" style="display: none;">
                                <div class="attachments-header">
                                    <i class="fas fa-paperclip"></i>
                                    <span>Attachments</span>
                                    <span class="attachments-count" id="attachmentsCount">0</span>
                                </div>
                                <div class="attachments-list" id="attachmentsList"></div>
                            </div>

                            <div class="editor-actions">
                                <button type="button" class="editor-action-btn" id="attachFileBtn">
                                    <i class="fas fa-paperclip"></i>
                                    <span>Attach File</span>
                                </button>
                                <button type="button" class="editor-action-btn" id="insertLinkBtn">
                                    <i class="fas fa-link"></i>
                                    <span>Insert Link</span>
                                </button>
                            </div>
                        </div>
                        <div class="input-glow"></div>
                    </div>

                        <div class="compose-actions">
                            <button class="btn primary-btn send-email-btn" id="sendEmailBtn">
                                <i class="fas fa-paper-plane"></i>
                                <span>Launch Email</span>
                                <div class="btn-glow"></div>
                            </button>
                            <button class="btn danger-btn" id="discardBtn">
                                <i class="fas fa-trash"></i>
                                <span>Discard</span>
                                <div class="btn-glow"></div>
                            </button>
                        </div>
                </div>
            </div>
        </div>

        <!-- Email Table Section -->
        <div class="table-section col-md-6">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-database"></i>
                    Email Database
                </h2>
                <div class="control-panel">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" placeholder="Search database..." class="search" id="searchInput" />
                        <div class="search-glow"></div>
                    </div>
                    <!-- <div class="dropdown">
                        <button class="btn filter-btn dropdown-toggle" id="filterBtn">
                            
                           
                        </button>
                        <div class="dropdown-menu" id="filterMenu">
                            
                        </div>
                    </div> -->
                    <button class="btn import-btn" id="importBtn">
                        <i class="fas fa-upload"></i>
                        <span>Import</span>
                        <div class="btn-glow"></div>
                    </button>
                </div>
            </div>

            <div class="table-container">
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="checkbox" id="selectAll"></th>
                                <th>Sr. No</th>
                                <th>Name</th>
                                <th>Email</th>
                                <!-- <th>Bank</th> -->
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="emailTableBody">
                            @*<tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">1</span></td>
                                    <td class="name-cell">
                                        <span>Rohan Sharma</span>
                                    </td>
                                    <td class="email-cell">rohan.sharma1912@gmail.com</td>
                                    <td><span class="bank-tag hdfc">HDFC</span></td>
                                    <td>
                                        <span class="status-badge success">
                                            <i class="fas fa-check-circle"></i>
                                            Success
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>*@
                            @*<tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">2</span></td>
                                    <td class="name-cell">
                                        <span>Ayesha Khan</span>
                                    </td>
                                    <td class="email-cell">ayesha.khan04@gmail.com</td>
                                    <td><span class="bank-tag bob">BOB</span></td>
                                    <td>
                                        <span class="status-badge success">
                                            <i class="fas fa-check-circle"></i>
                                            Success
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">3</span></td>
                                    <td class="name-cell">
                                        <span>Karan Patel</span>
                                    </td>
                                    <td class="email-cell">karan.patel992@gmail.com</td>
                                    <td><span class="bank-tag hdfc">HDFC</span></td>
                                    <td>
                                        <span class="status-badge success">
                                            <i class="fas fa-check-circle"></i>
                                            Success
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">4</span></td>
                                    <td class="name-cell">
                                        <span>Priya Verma</span>
                                    </td>
                                    <td class="email-cell">priya.verma1123@gmail.com</td>
                                    <td><span class="bank-tag kotak">Kotak</span></td>
                                    <td>
                                        <span class="status-badge success">
                                            <i class="fas fa-check-circle"></i>
                                            Success
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">5</span></td>
                                    <td class="name-cell">
                                        <span>Arjun Mehta</span>
                                    </td>
                                    <td class="email-cell">arjun.mehta1990@gmail.com</td>
                                    <td><span class="bank-tag bob">BOB</span></td>
                                    <td>
                                        <span class="status-badge failed">
                                            <i class="fas fa-times-circle"></i>
                                            Failed
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td><input type="checkbox" class="checkbox row-checkbox"></td>
                                    <td><span class="id-badge">6</span></td>
                                    <td class="name-cell">
                                        <span>Sneha Reddy</span>
                                    </td>
                                    <td class="email-cell">sneha.reddy87@gmail.com</td>
                                    <td><span class="bank-tag hdfc">HDFC</span></td>
                                    <td>
                                        <span class="status-badge success">
                                            <i class="fas fa-check-circle"></i>
                                            Success
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn send-btn" title="Send">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="action-btn resend-btn" title="Resend">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </td>
                                </tr>*@
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="pagination-container">
                <div class="pagination-info">
                    <span id="paginationInfo">Showing 1-8 of 8 entries</span>
                </div>
                <div class="pagination-controls">
                    <button class="pagination-btn" id="prevPageBtn" disabled>
                        <i class="fas fa-chevron-left"></i>
                        Previous
                    </button>
                    <div class="pagination-numbers" id="paginationNumbers">
                        <button class="pagination-number active" data-page="1">1</button>
                    </div>
                    <button class="pagination-btn" id="nextPageBtn" disabled>
                        Next
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="notification-container" id="notificationContainer"></div>
    </div>


    <form id="antiForgeryForm" method="post" asp-controller="Mail" asp-action="SendMail">
        @Html.AntiForgeryToken()
    </form>
